function HeadlineList(e){this.url=e;this.checkEmpty=function(){this.quantity===0&&this.refreshContent()};this.getRandom=function(e){var t=Math.floor(Math.random()*this.quantity),n=this.list[t];e&&this.deleteHeadline(t);return n};this.getHeadline=function(e,t){var n=this.list[e];t&&this.deleteHeadline(e);return n};this.deleteHeadline=function(e){this.list.splice(e,1);this.quantity-=1};this.fillFromJSON=function(e){this.list=e.headlines;this.quantity=this.list.length};this.refreshContent=function(){response=$.when($.getJSON(this.url,this.fillFromJSON.bind(this)))};this.refreshContent()}function Headline(e){this.title=e.title;this.url=e.url;this.onion=e.onion;this.isOnion=function(){return this.onion}}function quoted(e){return"&#8220;"+e+"&#8221;"}function setupPage(){$("#headline").html(quoted(headline.title))}function answerResponse(){var e=headline.url.split("/")[2];$("#source").text(e).attr("href",headline.url);var t;if(this.id==="not"&&!headline.onion||this.id==="onion"&&headline.onion){t="Yup. ";$("body").css("background","url('imgs/Fullgreen.jpg')").css("background-size","cover")}else{t="Nope. ";$("body").css("background","url('imgs/nogreen.jpg')").css("background-size","cover")}headline.onion?t+="It's fake.":t+="This happened.";$("#response .message").text(t);$("#question").css({transition:"400ms ease-out",bottom:"-500px"});$("#response").css({transition:"400ms ease-out",opacity:1,top:0-$("#question").outerHeight()+"px"});$("#white").css({transition:"400ms ease-out",height:$("#response").outerHeight()})}function nextHeadline(){}var headline,headlines,response;$("#onion, #not").on("click",answerResponse);$("#next").on("click",function(){$.getJSON("js/links.json",function(e){$("#response").removeClass("answer");$("#question").removeClass("answer");$("#white").removeClass("answer");item=SetA[Math.floor(Math.random()*SetA.length)];console.log(item);$("#headline").replaceWith('<h1 id = "headline">"'+item.headline+'"'+"</h1>");$("#source").replaceWith("<a target='_blank' id='source' href = "+item.url+"></a>");$("#source").text(domain(item.url));SetA.splice(item,1);SetA.length===0&&(SetA=e.list.slice(0))})});headlines=new HeadlineList("js/headlines.json");response.done(function(){headline=new Headline(headlines.getRandom(!0));setupPage()});$("#white").height($("#question").outerHeight());$("#response").css("bottom",$("#question").outerHeight()+$("#response").outerHeight()+"px");